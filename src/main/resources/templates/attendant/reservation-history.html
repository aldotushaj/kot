<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/main :: head}"></head>
<body>
<div th:replace="~{layout/main :: body(content=~{::content})}">
  <div th:fragment="content">
    <h2>Reservation History: <span th:text="${parking.location}">Parking Location</span></h2>

    <!-- Navigation buttons -->
    <div class="mb-4">
      <a th:href="@{/attendant/dashboard/{id}(id=${parking.id})}" class="btn btn-primary">Today's Dashboard</a>
      <a th:href="@{/attendant/history/{id}(id=${parking.id})}" class="btn btn-secondary active">Reservation History</a>
    </div>

    <!-- Past Reservations -->
    <h3>Past Reservations</h3>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>License Plate</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Price</th>
          <th>Paid</th>
          <th>Reserved From App</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="reservation : ${pastReservations}">
          <td th:text="${reservation.licensePlate}">ABC-123</td>
          <td th:text="${#temporals.format(reservation.startTime, 'yyyy-MM-dd HH:mm')}">2025-01-01 10:00</td>
          <td th:text="${#temporals.format(reservation.endTime, 'yyyy-MM-dd HH:mm')}">2025-01-01 12:00</td>
          <td>$<span th:text="${reservation.calculatedPrice}">10.00</span></td>
          <td>
            <span th:if="${reservation.paid}" class="badge bg-success">Paid</span>
            <span th:unless="${reservation.paid}" class="badge bg-warning">Unpaid</span>
          </td>
          <td>
            <span th:if="${reservation.reservedFromApp}" class="badge bg-info">Yes</span>
            <span th:unless="${reservation.reservedFromApp}" class="badge bg-secondary">No</span>
          </td>
        </tr>
        <tr th:if="${pastReservations.isEmpty()}">
          <td colspan="6" class="text-center">No past reservations found</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</body>
</html>